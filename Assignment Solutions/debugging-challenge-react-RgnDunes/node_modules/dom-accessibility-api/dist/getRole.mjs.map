{"version":3,"sources":["../sources/getRole.ts"],"names":["getLocalName","getRole","element","explicitRole","getExplicitRole","getImplicitRole","localNameToRoleMappings","article","aside","body","button","datalist","dd","details","dialog","dt","fieldset","figure","form","footer","h1","h2","h3","h4","h5","h6","header","hr","legend","li","math","main","menu","nav","ol","optgroup","option","output","progress","section","summary","table","tbody","textarea","tfoot","td","th","thead","tr","ul","mappedByTag","undefined","hasAttribute","getAttribute","length","type","size","trim","split"],"mappings":"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","sourcesContent":["// https://w3c.github.io/html-aria/#document-conformance-requirements-for-use-of-aria-attributes-in-html\n\nimport { getLocalName } from \"./util\";\n\nexport default function getRole(element: Element): string | null {\n\tconst explicitRole = getExplicitRole(element);\n\tif (explicitRole !== null) {\n\t\treturn explicitRole;\n\t}\n\n\treturn getImplicitRole(element);\n}\n\nconst localNameToRoleMappings: Record<string, string | undefined> = {\n\tarticle: \"article\",\n\taside: \"complementary\",\n\tbody: \"document\",\n\tbutton: \"button\",\n\tdatalist: \"listbox\",\n\tdd: \"definition\",\n\tdetails: \"group\",\n\tdialog: \"dialog\",\n\tdt: \"term\",\n\tfieldset: \"group\",\n\tfigure: \"figure\",\n\t// WARNING: Only with an accessible name\n\tform: \"form\",\n\tfooter: \"contentinfo\",\n\th1: \"heading\",\n\th2: \"heading\",\n\th3: \"heading\",\n\th4: \"heading\",\n\th5: \"heading\",\n\th6: \"heading\",\n\theader: \"banner\",\n\thr: \"separator\",\n\tlegend: \"legend\",\n\tli: \"listitem\",\n\tmath: \"math\",\n\tmain: \"main\",\n\tmenu: \"list\",\n\tnav: \"navigation\",\n\tol: \"list\",\n\toptgroup: \"group\",\n\t// WARNING: Only in certain context\n\toption: \"option\",\n\toutput: \"status\",\n\tprogress: \"progressbar\",\n\t// WARNING: Only with an accessible name\n\tsection: \"region\",\n\tsummary: \"button\",\n\ttable: \"table\",\n\ttbody: \"rowgroup\",\n\ttextarea: \"textbox\",\n\ttfoot: \"rowgroup\",\n\t// WARNING: Only in certain context\n\ttd: \"cell\",\n\tth: \"columnheader\",\n\tthead: \"rowgroup\",\n\ttr: \"row\",\n\tul: \"list\",\n};\n\nfunction getImplicitRole(element: Element): string | null {\n\tconst mappedByTag = localNameToRoleMappings[getLocalName(element)];\n\tif (mappedByTag !== undefined) {\n\t\treturn mappedByTag;\n\t}\n\n\tswitch (getLocalName(element)) {\n\t\tcase \"a\":\n\t\tcase \"area\":\n\t\tcase \"link\":\n\t\t\tif (element.hasAttribute(\"href\")) {\n\t\t\t\treturn \"link\";\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"img\":\n\t\t\tif ((element.getAttribute(\"alt\") || \"\").length > 0) {\n\t\t\t\treturn \"img\";\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"input\": {\n\t\t\tconst { type } = element as HTMLInputElement;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"button\":\n\t\t\t\tcase \"image\":\n\t\t\t\tcase \"reset\":\n\t\t\t\tcase \"submit\":\n\t\t\t\t\treturn \"button\";\n\t\t\t\tcase \"checkbox\":\n\t\t\t\tcase \"radio\":\n\t\t\t\t\treturn type;\n\t\t\t\tcase \"range\":\n\t\t\t\t\treturn \"slider\";\n\t\t\t\tcase \"email\":\n\t\t\t\tcase \"tel\":\n\t\t\t\tcase \"text\":\n\t\t\t\tcase \"url\":\n\t\t\t\t\tif (element.hasAttribute(\"list\")) {\n\t\t\t\t\t\treturn \"combobox\";\n\t\t\t\t\t}\n\t\t\t\t\treturn \"textbox\";\n\n\t\t\t\tcase \"search\":\n\t\t\t\t\tif (element.hasAttribute(\"list\")) {\n\t\t\t\t\t\treturn \"combobox\";\n\t\t\t\t\t}\n\t\t\t\t\treturn \"searchbox\";\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tcase \"select\":\n\t\t\tif (\n\t\t\t\telement.hasAttribute(\"multiple\") ||\n\t\t\t\t(element as HTMLSelectElement).size > 1\n\t\t\t) {\n\t\t\t\treturn \"listbox\";\n\t\t\t}\n\t\t\treturn \"combobox\";\n\t}\n\treturn null;\n}\n\nfunction getExplicitRole(element: Element): string | null {\n\tif (element.hasAttribute(\"role\")) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute check\n\t\tconst [explicitRole] = element.getAttribute(\"role\")!.trim().split(\" \");\n\t\tif (explicitRole !== undefined && explicitRole.length > 0) {\n\t\t\treturn explicitRole;\n\t\t}\n\t}\n\n\treturn null;\n}\n"],"file":"getRole.mjs"}